'use strict';
const path = require('path');
const Module = require('module');
<<<<<<< HEAD

const resolveFrom = (fromDir, moduleId, silent) => {
	if (typeof fromDir !== 'string') {
		throw new TypeError(`Expected \`fromDir\` to be of type \`string\`, got \`${typeof fromDir}\``);
=======
const fs = require('fs');

const resolveFrom = (fromDirectory, moduleId, silent) => {
	if (typeof fromDirectory !== 'string') {
		throw new TypeError(`Expected \`fromDir\` to be of type \`string\`, got \`${typeof fromDirectory}\``);
>>>>>>> 21d7be62d554915787485641c4ea1187492767dd
	}

	if (typeof moduleId !== 'string') {
		throw new TypeError(`Expected \`moduleId\` to be of type \`string\`, got \`${typeof moduleId}\``);
	}

<<<<<<< HEAD
	fromDir = path.resolve(fromDir);
	const fromFile = path.join(fromDir, 'noop.js');
=======
	try {
		fromDirectory = fs.realpathSync(fromDirectory);
	} catch (error) {
		if (error.code === 'ENOENT') {
			fromDirectory = path.resolve(fromDirectory);
		} else if (silent) {
			return;
		} else {
			throw error;
		}
	}

	const fromFile = path.join(fromDirectory, 'noop.js');
>>>>>>> 21d7be62d554915787485641c4ea1187492767dd

	const resolveFileName = () => Module._resolveFilename(moduleId, {
		id: fromFile,
		filename: fromFile,
<<<<<<< HEAD
		paths: Module._nodeModulePaths(fromDir)
=======
		paths: Module._nodeModulePaths(fromDirectory)
>>>>>>> 21d7be62d554915787485641c4ea1187492767dd
	});

	if (silent) {
		try {
			return resolveFileName();
<<<<<<< HEAD
		} catch (err) {
			return null;
=======
		} catch (error) {
			return;
>>>>>>> 21d7be62d554915787485641c4ea1187492767dd
		}
	}

	return resolveFileName();
};

<<<<<<< HEAD
module.exports = (fromDir, moduleId) => resolveFrom(fromDir, moduleId);
module.exports.silent = (fromDir, moduleId) => resolveFrom(fromDir, moduleId, true);
=======
module.exports = (fromDirectory, moduleId) => resolveFrom(fromDirectory, moduleId);
module.exports.silent = (fromDirectory, moduleId) => resolveFrom(fromDirectory, moduleId, true);
>>>>>>> 21d7be62d554915787485641c4ea1187492767dd
