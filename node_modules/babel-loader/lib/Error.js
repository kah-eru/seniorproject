"use strict";

const STRIP_FILENAME_RE = /^[^:]+: /;
<<<<<<< HEAD

=======
>>>>>>> 21d7be62d554915787485641c4ea1187492767dd
const format = err => {
  if (err instanceof SyntaxError) {
    err.name = "SyntaxError";
    err.message = err.message.replace(STRIP_FILENAME_RE, "");
    err.hideStack = true;
  } else if (err instanceof TypeError) {
    err.name = null;
    err.message = err.message.replace(STRIP_FILENAME_RE, "");
    err.hideStack = true;
  }
<<<<<<< HEAD

  return err;
};

=======
  return err;
};
>>>>>>> 21d7be62d554915787485641c4ea1187492767dd
class LoaderError extends Error {
  constructor(err) {
    super();
    const {
      name,
      message,
      codeFrame,
      hideStack
    } = format(err);
    this.name = "BabelLoaderError";
    this.message = `${name ? `${name}: ` : ""}${message}\n\n${codeFrame}\n`;
    this.hideStack = hideStack;
    Error.captureStackTrace(this, this.constructor);
  }
<<<<<<< HEAD

}

=======
}
>>>>>>> 21d7be62d554915787485641c4ea1187492767dd
module.exports = LoaderError;